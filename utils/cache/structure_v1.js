// ===========================================
// structure_v1.js
// ▼ GPT向けデータ構造説明ブロック
// ===========================================
module.exports = `
### contexts（体質・タイプ情報）
- type：体質タイプ名（例：陰虚タイプなど）
- trait：体質傾向（例：乾燥で熱がこもりやすい 等）
- flowType：流通病理（例：気滞・水滞・瘀血・巡り良好）
- organType：負担が出やすい経絡ライン（皮膚・筋膜のつながり）および、関連性の強い臓腑（例：肝・心・脾・肺・腎）
- motion：最も伸展負担がかかる経絡ラインの伸展動作。organType判定の指標にもなっている。
- symptom：不調主訴（例：胃腸・肩こり・メンタル・冷えなど）の種類。体質をベースに「流通病理」と「負担経絡（および関連臓腑）」の3層が重なり、不調が生じる。
- advice：{habits, breathing, stretch, tsubo, kampo} 各ケア内容と図解リンクのテキスト。優先ケア／サポートケアの考え方は flowType から推定する。
- created_at：初回登録日（体質分析を終えた日）

### followups（ととのい度チェック）
- latest：直近のチェック結果。以下の項目を含む：
  - symptom_level：不調(主訴)のつらさ（1=軽い〜5=強い）
  - sleep：睡眠リズムの整い具合（1=整っている〜5=乱れている）
  - meal：食事のタイミングや量の整い具合（1=整っている〜5=乱れている）
  - stress：ストレスや気分の安定度（1=安定〜5=不安定）
  - motion_level：最も伸展負担がかかる経絡動作(motion)を再テストしたときのつらさ（1=軽い〜5=強い）
- prev：前回のチェック結果（存在する場合）。latest と同じ構造。
- AIは latest と prev の差分から、「ラクになってきているか／ややツラさが戻っているか」などの傾向を読み取る。

### care_logs_daily（ケア記録）
- habits / breathing / stretch / tsubo / kampo：各ケア項目を「行った日」の数。
- 1日に同じケアを何度行っても“1日＝1カウント”として扱う。
- buildConsultMessagesでは、主に次の2種類の集計が使われる：
  - shortTermCareCounts：前回のととのい度チェック日〜今回のチェック日までの実施日数。
  - longTermCareCounts：体質分析（contexts.created_at）〜現在までの累計実施日数。
- 短期のカウントは「直近の1〜数週間でどのケアがどれくらい行われたか」を示し、
  長期のカウントは「全体としてどのケアをベースに積み上げてきたか」を示す。

### recentChats（直近の相談履歴）
- 直近3件分の会話（user / assistant）の短い要約が入る。
- AIは、同じ話題が続いている場合や、前回の提案との整合性をとるために参照する。
`;
